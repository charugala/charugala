<div class="timetable-body"
     [style.minWidth.px]="days.length * DAY_WIDTH + SIDEBAR_WIDTH">
  <div class="item-group"
       *ngFor="let group of groups">
    <div class="item-label label-bar">
      {{group.name}}
    </div>
    <div class="item-display">
      <ng-container *ngFor="let itemGrouping of doLayout(group.items)">
        <div class="item-grouping" *ngIf="visibleInPeriod(itemGrouping)">
          <div class="items">
            <ng-container *ngFor="let item of itemGrouping">
              <div class="item {{item.class}}"
                   *ngIf="isInPeriod(item.startTime) || isInPeriod(item.endTime)"
                   [style.left.px]="(getDayOfPeriod(item.startTime) * DAY_WIDTH + SIDEBAR_WIDTH)"
                   [style.minWidth.px]="(getDuration(item) * DAY_WIDTH)"
                   [style.maxWidth.px]="(getDuration(item) * DAY_WIDTH)"
                   [ngClass]="['lighten']"
                   [class.open-left]="startsBeforePeriod(item.startTime)"
                   [class.open-right]="endsAfterPeriod(item.endTime)"
                   (click)="open(group)">
                <ng-container *ngFor="let day of item.dates">
                  <div class="blockade-day day-width-1"
                       *ngIf="isInPeriod(day)"
                       [style.left.px]="getDaysSince(item.startTime,day)*DAY_WIDTH">
                    &nbsp;
                  </div>
                </ng-container>
                <div class="blockade-title">
                  {{item.name}}
                  ({{item.startTime | timeChartDateFormatter}} - {{item.endTime | timeChartDateFormatter}})
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
  <div class="today-marker"
       *ngIf="isInPeriod(this.today)"
       [style.left.px]="(getDayOfPeriod(this.today) * DAY_WIDTH) + SIDEBAR_WIDTH + 7" #todaymarker></div>
</div>
